language: rust

# TODO: While using Rust 2018 preview
rust:
    - beta
    - nightly

sudo: true

before_install:
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - curl https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
    - echo "deb http://apt.llvm.org/jessie/ llvm-toolchain-jessie-7 main" | sudo tee -a /etc/apt/sources.list
    - sudo apt-get update
    - sudo apt-get -y install llvm-7 llvm-7-dev
    # These confuse llvm-sys
    - sudo apt-get -y remove llvm llvm-runtime llvm-3.4 llvm-3.4-dev llvm-3.4-runtime
    - sudo rm -f /usr/local/clang-5.0.0/bin/llvm-config

env:
    LLVM_SYS_70_PREFIX: /usr/lib/llvm-7
    CC: clang
